# üõ∏ Xenus DT1 Decompiler

[![Platform](https://img.shields.io/badge/platform-Windows-blue.svg)](https://www.microsoft.com/windows)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Build](https://img.shields.io/badge/.NET-8.0-blueviolet.svg)](https://dotnet.microsoft.com/download)

–°–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —É—Ç–∏–ª—ñ—Ç–∞ –¥–ª—è —Ä–µ–≤–µ—Ä—Å-—ñ–Ω–∂–∏–Ω—ñ—Ä–∏–Ω–≥—É —Ç–∞ –º–∞—Å–æ–≤–æ–≥–æ –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É—Ä –∫–µ—à—É (—Ñ–æ—Ä–º–∞—Ç–∏ `*.DT1` —Ç–∞ `*.DT2`) –≥—Ä–∏ **Xenus 2: White Gold** (–ë—ñ–ª–µ –∑–æ–ª–æ—Ç–æ).

–ü—Ä–æ–≥—Ä–∞–º–∞ –¥–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ —ñ–≥—Ä–æ–≤—ñ –∞—Ä—Ö—ñ–≤–∏ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å (`.dds`, `.tga`, `.bmp`, `.png` —Ç–æ—â–æ) –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è, –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ –ø—Ä–∏ —Ü—å–æ–º—É –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—É —ñ—î—Ä–∞—Ä—Ö—ñ—é –ø–∞–ø–æ–∫.

## üí° –ß–æ–º—É —Ü–µ–π –ø—ñ–¥—Ö—ñ–¥ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π?

–î–∞–Ω—ñ –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö `DT1/DT2` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–µ –¥–ª—è —Ä—É—à—ñ—è **Vital Engine 3** –ø–∞–∫—É–≤–∞–Ω–Ω—è (–º–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π `zlib` –∑ –ø—Ä–µ—Å–µ—Ç-—Å–ª–æ–≤–Ω–∏–∫–∞–º–∏). –ó–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± –Ω–∞–º–∞–≥–∞—Ç–∏—Å—è –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ —Å–∫–ª–∞–¥–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –∑ –Ω—É–ª—è, —Ü–µ–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **Native Interop** –¥–ª—è –≤–∏–∫–ª–∏–∫—É –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≥—Ä–∏ ‚Äî `VELoader.dll`.

–£—Ç–∏–ª—ñ—Ç–∞ –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –µ–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π:
* `GetCLVersion` ‚Äî –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ.
* `GetUnloadSize` ‚Äî –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –≤–∏–¥—ñ–ª–µ–Ω–Ω—è –ø–∞–º'—è—Ç—ñ.
* `Unload` ‚Äî –¥–ª—è –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ—ó –¥–µ–∫–æ–º–ø—Ä–µ—Å—ñ—ó.

### üõ† –í–∏–º–æ–≥–∏ –¥–æ –∑–±—ñ—Ä–∫–∏

* **–û–°:** Windows (x86/x64)
* **Runtime:** [.NET SDK 8.0+](https://dotnet.microsoft.com/download/dotnet/8.0)
* **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:** –ü—Ä–æ—î–∫—Ç –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –º–∞—î –±—É—Ç–∏ –∑—ñ–±—Ä–∞–Ω–∏–π –ø—ñ–¥ **x86**, –æ—Å–∫—ñ–ª—å–∫–∏ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∞ DLL —î 32-–±—ñ—Ç–Ω–æ—é.
* **–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:** –§–∞–π–ª `VELoader.dll` (–º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ –≤ –∫–æ—Ä–µ–Ω–µ–≤—ñ–π –ø–∞–ø—Ü—ñ –≥—Ä–∏ –∞–±–æ –≤ –∞—Ä—Ö—ñ–≤–∞—Ö `GrpUnpacker`).

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```text
xenus-dt1-decompiler/
 ‚îú‚îÄ‚îÄ src/
 ‚îÇ    ‚îî‚îÄ‚îÄ XenusDt1Decompiler/
 ‚îÇ         ‚îú‚îÄ‚îÄ XenusDt1Decompiler.csproj
 ‚îÇ         ‚îî‚îÄ‚îÄ Program.cs
 ‚îú‚îÄ‚îÄ .github/
 ‚îÇ    ‚îî‚îÄ‚îÄ workflows/
 ‚îÇ         ‚îî‚îÄ‚îÄ release.yml
 ‚îú‚îÄ‚îÄ run_decompiler.bat
 ‚îú‚îÄ‚îÄ .gitignore
 ‚îî‚îÄ‚îÄ README.md
```

### üèó –ó–±—ñ—Ä–∫–∞

–î–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–∏–∫–æ–Ω—É–≤–∞–Ω–æ–≥–æ —Ñ–∞–π–ª—É –≤–∏–∫–æ–Ω–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ:

```powershell
dotnet build .\src\XenusDt1Decompiler\XenusDt1Decompiler.csproj -c Release
```

–î–ª—è –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó –≥–æ—Ç–æ–≤–æ–≥–æ –±—ñ–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª—É –±–µ–∑ –∑–∞–π–≤–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π:

```powershell
dotnet publish .\src\XenusDt1Decompiler\XenusDt1Decompiler.csproj -c Release -r win-x86 --self-contained false
```

## üöÄ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

–ü—Ä–æ–≥—Ä–∞–º–∞ –ø—ñ–¥—Ç—Ä–∏–º—É—î —è–∫ –ø–æ—à—Ç—É—á–Ω—É –æ–±—Ä–æ–±–∫—É, —Ç–∞–∫ —ñ –º–∞—Å–æ–≤–µ –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è —Ü—ñ–ª–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π –∑ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ (–≤–∫–ª—é—á–∞—é—á–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∏–π –ø—Ä–æ—Ö—ñ–¥ —É—Å—ñ—Ö –≤–∫–ª–∞–¥–µ–Ω–∏—Ö –ø—ñ–¥–ø–∞–ø–æ–∫).

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å:

```powershell
.\xenus-dt1-decompiler.exe <—à–ª—è—Ö_–¥–æ_—Ñ–∞–π–ª—É_–∞–±–æ_–ø–∞–ø–∫–∏> [–≤–∏—Ö—ñ–¥–Ω–∞_–ø–∞–ø–∫–∞] [—à–ª—è—Ö_–¥–æ_veloader.dll] [—Ñ–æ—Ä–º–∞—Ç]
```

### –ü—Ä–∏–∫–ª–∞–¥–∏:

**1. –î–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ —Ç–∞–π–ª—É –∫–∞—Ä—Ç–∏:**

```powershell
.\xenus-dt1-decompiler.exe "C:\Games\Xenus 2\CACHE\TEXTURES\MAP\GROUP_0_0_BMP.DT1" ".\out_tex"
```

**2. –ü–∞–∫–µ—Ç–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –≤—Å—ñ—Ö —Ç–µ–∫—Å—Ç—É—Ä (—ñ–∑ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∏–º –ø—Ä–æ—Ö–æ–¥–æ–º —É—Å—ñ—Ö –≤–∫–ª–∞–¥–µ–Ω–∏—Ö –ø–∞–ø–æ–∫):**

```powershell
.\xenus-dt1-decompiler.exe "C:\Games\Xenus 2\CACHE\TEXTURES" ".\out_tex" "C:\Games\Xenus 2\VELoader.dll"
```

–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –±—É–¥—É—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ —Ñ–∞–π–ª–∏ —Ç–µ–∫—Å—Ç—É—Ä (—Ñ–æ—Ä–º–∞—Ç –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ—ó –Ω–∞–∑–≤–∏ —Ñ–∞–π–ª—É, –Ω–∞–ø—Ä. `.bmp`, `.tga` –∞–±–æ `.dds`), —è–∫—ñ –º–æ–∂–Ω–∞ –≤—ñ–¥–∫—Ä–∏—Ç–∏ —É –≥—Ä–∞—Ñ—ñ—á–Ω–∏—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞—Ö. –ü—Ä–∏–º—É—Å–æ–≤–æ –º–æ–∂–Ω–∞ –≤–∫–∞–∑–∞—Ç–∏ —Ñ–æ—Ä–º–∞—Ç 4-–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º.

### ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ä–µ–ª—ñ–∑ (GitHub Actions)

–£ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –ø–∞–π–ø–ª–∞–π–Ω: `.github/workflows/release.yml`

–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –ø—É—à—É —Ç–µ–≥—É –≤–µ—Ä—Å—ñ—ó (`git tag v0.1.0`), GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä–µ –ø—Ä–æ—î–∫—Ç —ñ —Å—Ç–≤–æ—Ä–∏—Ç—å GitHub Release, –ø—Ä–∏–∫—Ä—ñ–ø–∏–≤—à–∏ –∞—Ä—Ö—ñ–≤ `win-x86.zip` –∑ –≥–æ—Ç–æ–≤–æ—é —É—Ç–∏–ª—ñ—Ç–æ—é —Ç–∞ —Ñ–∞–π–ª–æ–º —à–≤–∏–¥–∫–æ–≥–æ –∑–∞–ø—É—Å–∫—É `run_decompiler.bat`.

## üì¶ –ö–æ–Ω—Ç—Ä–∏–±'—é—Ç–æ—Ä–∞–º

* **Game Assets:** –ö–∞—Ç–µ–≥–æ—Ä–∏—á–Ω–æ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—ñ —ñ–≥—Ä–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏ (`.DT1`, `.DT2`, `.dds`, `.png`) —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π.
* **–ö–æ–º—ñ—Ç–∏:** –î–æ–¥–∞–≤–∞–π—Ç–µ –ª–∏—à–µ –≤–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é —Ç–∞ —Å–∫—Ä–∏–ø—Ç–∏ –∑–±—ñ—Ä–∫–∏.
* **–ë—ñ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π:** –î–∏–≤—ñ—Ç—å—Å—è —Ñ–∞–π–ª **[CONTRIBUTING.md](CONTRIBUTING.md)**.
* **–õ—ñ—Ü–µ–Ω–∑—ñ—è:** `MIT` (–¥–∏–≤. `LICENSE`).

---

## ‚öñÔ∏è –í—ñ–¥–º–æ–≤–∞ –≤—ñ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ

–¶–µ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π —Å—Ç–≤–æ—Ä–µ–Ω–æ –≤–∏–∫–ª—é—á–Ω–æ –¥–ª—è –¥–æ—Å–ª—ñ–¥–Ω–∏—Ü—å–∫–∏—Ö —Ü—ñ–ª–µ–π —Ç–∞ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ—Å–µ –ø–æ–≤–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å –∑–∞ –¥–æ—Ç—Ä–∏–º–∞–Ω–Ω—è –º—ñ—Å—Ü–µ–≤–æ–≥–æ –∑–∞–∫–æ–Ω–æ–¥–∞–≤—Å—Ç–≤–∞ —Ç–∞ –ª—ñ—Ü–µ–Ω–∑—ñ–π–Ω–æ—ó —É–≥–æ–¥–∏ (EULA) –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ—ó –≥—Ä–∏ –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ —ó—ó —Ñ–∞–π–ª—ñ–≤.
